// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
    id                  Int @id @default(autoincrement())
    username            String @unique
    password            String
    profile             Profile?
    userRole            UserRole?
    accountBalance      AccountBalance?
}

model Role {
    id              Int @id @default(autoincrement())
    roleName        String @unique
    userRole        UserRole[]
}

model UserRole {
    userId     Int @unique
    user       User @relation(fields: [userId], references: [id])
    roleId     Int
    role       Role @relation(fields: [roleId], references: [id])
    @@id([userId, roleId])
}

model Profile {
    userId        Int @unique @id
    fullName      String
    email         String @unique
    phoneNumber   String @unique
    birthday      DateTime
    createdAt     DateTime @default(now())
    user          User  @relation(fields: [userId], references: [id])
}

model AccountBalance {
    userId      Int @unique @id
    balance     Int @default(50)
    createdAt   DateTime @default(now())
    user        User  @relation(fields: [userId], references: [id])
}
